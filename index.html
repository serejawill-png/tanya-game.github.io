<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TanyaGame</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">

<style>
  :root {
    --grad1: #ff9ff3;
    --grad2: #feca57;
    --grad3: #48dbfb;
    --grad4: #1dd1a1;
  }

  body {
    margin: 0;
    font-family: 'Fredoka One', cursive;
    color: #333;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
    background: linear-gradient(-45deg, var(--grad1), var(--grad2), var(--grad3), var(--grad4));
    background-size: 400% 400%;
    animation: gradientFlow 12s ease infinite;
    perspective: 1000px;
    position: relative;
  }

  @keyframes gradientFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .cloud {
    position: absolute;
    top: 0;
    width: 200px;
    opacity: 0.6;
    z-index: 0;
    animation: floatCloud linear infinite;
  }

  @keyframes floatCloud {
    from { transform: translateX(-250px); }
    to { transform: translateX(110vw); }
  }

  .cloud:nth-child(1) { top: 60px; animation-duration: 60s; left: -200px; }
  .cloud:nth-child(2) { top: 150px; animation-duration: 80s; left: -300px; opacity: 0.5; }
  .cloud:nth-child(3) { top: 220px; animation-duration: 100s; left: -250px; opacity: 0.7; }

  h1 {
    color: #ff3c8d;
    margin-top: 30px;
    font-size: 2.8em;
    text-shadow: 2px 2px 8px rgba(255,255,255,0.8);
    z-index: 1;
  }

  #game-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    margin-top: 40px;
    gap: 50px;
    flex-wrap: wrap;
    width: 100%;
    padding: 0 10px;
    position: relative;
    z-index: 1;
  }

  #inventory {
    background: rgba(255,255,255,0.9);
    border: 3px solid #ffb6c1;
    border-radius: 16px;
    padding: 20px;
    width: 320px;
    height: 440px;
    overflow-y: auto;
    box-shadow: 0 0 20px rgba(255, 182, 193, 0.6);
  }

  #inventory h3 {
    margin-top: 0;
    text-align: center;
    color: #d63031;
    font-size: 1.4em;
  }

  .item {
    background: #fff;
    border-radius: 10px;
    padding: 10px;
    margin: 8px 0;
    font-size: 18px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .count { color: #6c5ce7; font-weight: bold; }
  .points { color: #00b894; font-weight: bold; }

  #game {
    text-align: center;
    position: relative;
  }

  #photos {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 60px;
    margin-bottom: 25px;
    position: relative;
  }

  .photo {
    width: 180px;
    height: 180px;
    border-radius: 50%;
    border: 5px solid #ff99cc;
    object-fit: cover;
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    animation: sway 3s infinite ease-in-out;
    transition: transform 0.4s ease, box-shadow 0.5s;
  }

  @keyframes sway {
    0% { transform: rotate(-3deg); }
    50% { transform: rotate(3deg); }
    100% { transform: rotate(-3deg); }
  }

  @keyframes tanyaWin {
    0% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.3) rotate(360deg); }
    100% { transform: scale(1) rotate(720deg); }
  }

  @keyframes smack {
    0% { transform: translateX(0); }
    40% { transform: translateX(-80px) rotate(-10deg); }
    60% { transform: translateX(-80px) rotate(-10deg); }
    100% { transform: translateX(0); }
  }

  .tanya-spin { animation: tanyaWin 1s ease; }
  .yulia-hit { animation: smack 0.6s ease; }

  .popup {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 28px;
    font-weight: bold;
    color: #ff0077;
    opacity: 0;
    animation: popupFade 0.8s ease forwards;
    text-shadow: 0 0 10px white;
  }

  @keyframes popupFade {
    0% { opacity: 1; transform: translate(-50%, -10px) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -70px) scale(1.3); }
  }

  #tanya-btn {
    position: absolute;
    background: linear-gradient(45deg, #ff80bf, #ffb6c1);
    border: 4px solid #ff5ea2;
    border-radius: 50%;
    width: 120px;
    height: 120px;
    font-size: 14px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s;
    box-shadow: 0 6px 15px rgba(255, 0, 100, 0.3);
  }

  #counter { font-size: 26px; margin-top: 25px; }
  #message { font-size: 18px; color: #2d3436; margin-top: 15px; min-height: 30px; }

  footer { margin-top: auto; margin-bottom: 15px; color: #555; font-size: 1em; }

  @media (max-width: 768px) {
    #game-container {
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }
    #inventory {
      order: 2;
      width: 90%;
      height: auto;
    }
    #photos { gap: 20px; }
    .photo { width: 120px; height: 120px; }
    #tanya-btn { width: 140px; height: 140px; font-size: 15px; }
    h1 { font-size: 1.8em; text-align: center; }
  }
</style>
</head>
<body>

<img src="cloud1.png" class="cloud">
<img src="cloud2.png" class="cloud">
<img src="cloud3.png" class="cloud">

<h1>–ö–ª–∏–∫–∞–π –∏ –ø—Ä–æ–∫–∞—á–∞–π –¢–∞–Ω—é üí´</h1>

<div id="game-container">
  <div id="game">
    <div id="photos">
      <img id="tanya" class="photo" src="tanya1.png" alt="–¢–∞–Ω—è">
      <div id="yulia-container" style="position: relative;">
        <img id="yulia" class="photo" src="yulia.png" alt="–Æ–ª—è">
      </div>
    </div>

    <div id="play-area" style="position:relative; width:100vw; height:300px;">
      <button id="tanya-btn">–ü–æ–ø—Ä–æ—Å–∏—Ç—å —É –Æ–ª–∏ üéÅ</button>
    </div>

    <div id="counter">–û—á–∫–∏: 0</div>
    <div id="message">–ö–ª–∏–∫–∞–π, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏!</div>
  </div>

  <div id="inventory">
    <h3>üéÅ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
    <div id="items"></div>
  </div>
</div>

<footer>¬© 2025 –¢–∞–Ω—è –∏ –Æ–ª—è Production üòÑ</footer>

<audio id="levelUpSound" src="levelup.mp3" preload="auto"></audio>
<audio id="clickSound" src="click.mp3" preload="auto"></audio>

<script>
  const button = document.getElementById('tanya-btn');
  const playArea = document.getElementById('play-area');

  // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è (—Ü–µ–Ω—Ç—Ä —ç–∫—Ä–∞–Ω–∞ –ø–æ X –∏ Y=100)
  let btnX = window.innerWidth / 2 - 60; // —Å–¥–≤–∏–≥ —Å —É—á–µ—Ç–æ–º –ø–æ–ª–æ–≤–∏–Ω—ã —Ä–∞–∑–º–µ—Ä–∞ –∫–Ω–æ–ø–∫–∏ (120/2)
  let btnY = 100;

  button.style.left = btnX + 'px';
  button.style.top = btnY + 'px';

  // –î–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
  let targetX = btnX;
  let targetY = btnY;

  function lerp(start, end, t) {
    return start + (end - start) * t;
  }

  function moveButtonRandom() {
    const margin = 50;
    const maxX = window.innerWidth - button.offsetWidth - margin;
    const maxY = 250 - button.offsetHeight - margin;
    targetX = Math.min(Math.max(btnX + getRandomInt(-100, 100), margin), maxX);
    targetY = Math.min(Math.max(btnY + getRandomInt(-60, 60), 0), maxY);
  }

  // –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
  function animate() {
    // –ü–ª–∞–≤–Ω–æ –ø—Ä–∏–±–ª–∏–∂–∞–µ–º—Å—è –∫ targetX/Y
    btnX = lerp(btnX, targetX, 0.05);
    btnY = lerp(btnY, targetY, 0.05);

    button.style.left = btnX + 'px';
    button.style.top = btnY + 'px';

    requestAnimationFrame(animate);
  }

  animate();

  // –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –ª–æ–≥–∏–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  let points = 0, clicksSinceLastGift = 0, nextGiftAt = getRandomInt(1, 10);
  const counter = document.getElementById('counter');
  const message = document.getElementById('message');
  const inventoryDiv = document.getElementById('items');
  const tanyaImg = document.getElementById('tanya');
  const yuliaImg = document.getElementById('yulia');
  const yuliaContainer = document.getElementById('yulia-container');
  const levelUpSound = document.getElementById('levelUpSound');
  const clickSound = document.getElementById('clickSound');

  const tanyaImages = ["tanya1.png","tanya2.png","tanya3.png","tanya4.png","tanya5.png","tanya6.png"];
  const glowClasses = ["glowPink","glowBlue","glowPurple","glowGold","glowGreen","glowPink"];
  let currentStage = 0;

  const gifts = [
    { name: '–ü–∏—Ä–æ–∂–Ω–æ–µ üç∞', value: 20 },
    { name: '–ú–æ—Ä–æ–∂–µ–Ω–æ–µ üç¶', value: 40 },
    { name: '–ü–æ–¥—Å—Ä–∞—á–Ω–∏–∫ üòÖ', value: -60 },
    { name: '–ê—Ä–±—É–∑ üçâ', value: 100 },
    { name: '–ö–æ–Ω—Ñ–µ—Ç–∞ üç¨', value: 10 },
    { name: '–ß–∞—à–∫–∞ –∫–∞–∫–∞–æ ‚òï', value: 25 },
    { name: '–ö–æ—Ç–∏–∫ üê±', value: 50 }
  ];

  const inventory = {};

  button.addEventListener('click', () => {
    points++;
    clicksSinceLastGift++;
    counter.textContent = `–û—á–∫–∏: ${points}`;
    message.textContent = '–¢–∞–Ω—è –∫–ª–∏–∫–∞–µ—Ç! üòä';
    clickSound.currentTime = 0;
    clickSound.play().catch(()=>{});
    moveButtonRandom();
    checkEvolution();
    if (clicksSinceLastGift >= nextGiftAt) {
      giveRandomGift();
      clicksSinceLastGift = 0;
      nextGiftAt = getRandomInt(1, 10);
    }
  });

  function giveRandomGift() {
    const gift = gifts[Math.floor(Math.random() * gifts.length)];
    points += gift.value;
    counter.textContent = `–û—á–∫–∏: ${points}`;
    checkEvolution();
    showPopup();
    if (!inventory[gift.name]) {
      inventory[gift.name] = { count: 1, totalPoints: gift.value };
      addGiftToInventory(gift.name, gift.value);
    } else {
      inventory[gift.name].count++;
      inventory[gift.name].totalPoints += gift.value;
      updateGiftInInventory(gift.name);
    }

    if (gift.name.includes('–ü–æ–¥—Å—Ä–∞—á–Ω–∏–∫')) {
      message.textContent = `–Æ–ª—è –¥–∞–ª–∞ –ø–æ–¥—Å—Ä–∞—á–Ω–∏–∫ üò¨ (${gift.value} –æ—á–∫–æ–≤!)`;
      yuliaImg.classList.add('yulia-hit');
      setTimeout(() => yuliaImg.classList.remove('yulia-hit'), 600);
    } else {
      message.textContent = `–Æ–ª—è –¥–∞–ª–∞ ${gift.name}! üéâ (+${gift.value} –æ—á–∫–æ–≤)`;
      tanyaImg.classList.add('tanya-spin');
      setTimeout(() => tanyaImg.classList.remove('tanya-spin'), 1000);
    }
  }

  function showPopup() {
    const popup = document.createElement('div');
    popup.textContent = '–ù–∞!';
    popup.className = 'popup';
    yuliaContainer.appendChild(popup);
    setTimeout(() => popup.remove(), 800);
  }

  function addGiftToInventory(name, value) {
    const div = document.createElement('div');
    div.className = 'item';
    div.id = `gift-${encodeURIComponent(name)}`;
    div.innerHTML = `
      <div>${name} <span class="count">x1</span></div>
      <div class="points">${value > 0 ? '+' + value : value}</div>
    `;
    inventoryDiv.prepend(div);
  }

  function updateGiftInInventory(name) {
    const data = inventory[name];
    const div = document.getElementById(`gift-${encodeURIComponent(name)}`);
    if (div) {
      div.querySelector('.count').textContent = `x${data.count}`;
      div.querySelector('.points').textContent =
        data.totalPoints > 0 ? '+' + data.totalPoints : data.totalPoints;
    }
  }

  function checkEvolution() {
    const stage = Math.min(Math.floor(points / 100), tanyaImages.length - 1);
    if (stage !== currentStage) {
      currentStage = stage;
      tanyaImg.src = tanyaImages[stage];
      const glowClass = glowClasses[stage];
      tanyaImg.classList.add(glowClass);
      levelUpSound.currentTime = 0;
      levelUpSound.play().catch(()=>{});
      setTimeout(() => tanyaImg.classList.remove(glowClass), 2000);
    }
  }

  function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }
</script>

</body>
</html>
